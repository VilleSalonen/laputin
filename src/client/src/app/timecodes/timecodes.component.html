<div class="container">
    <div class="files-search">
        <div class="row">
            <app-timecode-search (update)="filterFiles($event)"></app-timecode-search>
            <div class="export-button">
                <span (click)="export()" style="cursor: pointer;">
                    <i class="fas fa-share-square"></i> Export</span>
            </div>
            <div class="export-commands" *ngIf="exporting">
                <textarea *ngIf="exporting">{{exportCommands}}</textarea>
            </div>
        </div>
    </div>

    <div class="files-list" style="flex-grow: 1;">
        <h2>Showing {{timecodeAmount}} matching timecodes</h2>

        <virtual-scroller #scroll [items]="timecodeItems">
            <div *ngFor="let timecodeItem of scroll.viewPortItems">
                <a [routerLink]="['/files', timecodeItem.item.hash]">
                    <div style="display: flex; margin-bottom: 12px;">
                        <div class="filename">
                            <span class="filename-small">{{timecodeItem.item.directory}}</span>
                            <br />
                            <span class="filename-big">{{timecodeItem.item.nameSansSuffix}}</span>
                            <span class="filename-small">{{timecodeItem.item.suffix}}</span>
                        </div>
                    </div>
                </a>

                <div style="display: flex; flex-direction: row; overflow-y: hidden; max-width: 100%; margin-bottom: 24px;">
                    <ng-container *ngFor="let code of timecodeItem.codes; let i = index">
                        <app-timecode-readonly *ngIf="i < 7" [timecode]="code"></app-timecode-readonly>
                    </ng-container>
                    <div *ngIf="timecodeItem.codes.length >= 7">...</div>
                </div>
            </div>
        </virtual-scroller>
    </div>
</div>
